# Data Model of Registryman

When it comes to the data model of the registryman project, there are two main
data structures that need to be explained.

First, the data model of the configuration yaml files. The understanding of this
data model is important for the users and developers of registryman.

Secondly, the data model that describes the state of the registries. This data
model is relevant to the developers only.

## Configuration Model

The configuration model describes the expected state of the managed registries.
The configuration is described as yaml files. The swagger model of the yaml
files can be generated with the `registryman swagger` command.

Some example yaml files can be found in the `examples` directory.

## Registry Status Model

The expected and the actual state of the registries are described by the
registry status model. A pseudo representation of the registry status model is
shown below.

``` yaml
projects:
- name: project_name
  members:
  - name: member_name
    type: user
    role: administrator
    dn: ""
  replication-rules:
  - remote-registry: other_registry 
    trigger: manual
    direction: push
  storage-used: 123456789
  scanner-status:
  - name: scanner_name
    url: http://vulnerability.scanner
```

The registry status model is on one hand created by parsing the configuration
YAML files, i.e. the configuration model. The combination of registry, project
and scanner resources result in the registry status model that expresses the
**expected state**.

On the other hand, the registry state model can be generated by collecting the
data of an actual registry service. The data is collected over the network API
exposed by the service. The registry state collected like this represents the
**actual state** of a registry.

Both the actual state and the expected state share the same structure which
makes them easy to compare.
